import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.mime.image import MIMEImage

# Define the path to your image
image_path = "path_to_your_image.png"

# Open the image and read it
with open(image_path, 'rb') as file:
    img_data = file.read()

# Create the root message
msg = MIMEMultipart('related')
msg['Subject'] = 'Test email with inline image'
msg['From'] = 'sender@example.com'
msg['To'] = 'receiver@example.com'

# Create the HTML part with a reference to the embedded image
html_part = MIMEText('<html><body><h1>Hello!</h1><img src="cid:image1"></body></html>', 'html')
msg.attach(html_part)

# Embed the image
image_mime = MIMEImage(img_data, name='image.png')
image_mime.add_header('Content-ID', '<image1>')
msg.attach(image_mime)

# Send the email
with smtplib.SMTP('smtp.example.com', 587) as smtp:
    smtp.starttls()
    smtp.login('sender@example.com', 'password')
    smtp.sendmail('sender@example.com', 'receiver@example.com', msg.as_string())
