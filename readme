from pydantic import BaseModel
from typing import List

class ConfigRecord(BaseModel):
    env: str
    key_nm: str
    val_tx: str
    config_id: int

class MainPayload(BaseModel):
    data: List[ConfigRecord]
    cnsmr_ingestion_id: int


from flask_restx import fields

config_record_fields = ns.model('ConfigRecord', {
    'env': fields.String,
    'key_nm': fields.String,
    'val_tx': fields.String,
    'config_id': fields.Integer
})

main_payload_fields = ns.model('MainPayload', {
    'data': fields.List(fields.Nested(config_record_fields)),
    'cnsmr_ingestion_id': fields.Integer
})


@ns.route('/endpoint')
class ConfigResource(Resource):
    @ns.expect(main_payload_fields)
    def post(self):
        # Your logic here
        return {"message": "Data received"}





